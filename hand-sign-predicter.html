<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Sign Language Detector - XIZOA Tools</title>
<meta name="description" content="Real-time AI Sign Language Detector & Hand Tracking. Supports 20+ International Sign Languages including ASL, ISL, and BSL.">

<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>

<style>
:root{
  --brand:#00f7ff;
  --brand-glow: rgba(0, 247, 255, 0.5);
  --bg-dark:#050a14;
  --glass-bg: rgba(255, 255, 255, 0.03);
  --glass-border: rgba(255, 255, 255, 0.08);
  --text:#ffffff;
  --muted:#94a3b8;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:'Outfit',sans-serif}
body{background:var(--bg-dark);color:var(--text);overflow-x:hidden;}

/* HEADER (Simplified for Tool Page) */
header{
  padding: 20px 30px; border-bottom: 1px solid var(--glass-border);
  display: flex; justify-content: space-between; align-items: center;
  background: rgba(5,10,20,0.9); backdrop-filter: blur(10px);
}
.logo{font-size:1.5rem;font-weight:800;color:white;text-decoration:none; display:flex; gap:10px; align-items:center;}
.logo i{color:var(--brand);}
.back-btn{color:var(--muted); text-decoration:none; font-weight:600; transition:0.3s;}
.back-btn:hover{color:var(--brand);}

/* MAIN CONTENT */
.container{max-width:1200px;margin:40px auto;padding:0 20px; text-align:center;}

h1{font-size:2.5rem; margin-bottom:10px;}
h1 span{color:var(--brand); text-shadow:0 0 20px var(--brand-glow);}
.subtitle{color:var(--muted); margin-bottom:40px; max-width:600px; margin-left:auto; margin-right:auto;}

/* CONTROLS AREA */
.controls {
    background: var(--glass-bg); border: 1px solid var(--glass-border);
    padding: 20px; border-radius: 16px; display: inline-flex; gap: 20px;
    align-items: center; flex-wrap: wrap; justify-content: center;
    margin-bottom: 30px;
}

select {
    background: #000; color: white; border: 1px solid var(--glass-border);
    padding: 12px 20px; border-radius: 8px; outline: none; cursor: pointer;
    font-size: 1rem;
}
select:focus { border-color: var(--brand); }

.btn-primary {
    background: var(--brand); color: #000; padding: 12px 30px; border-radius: 50px;
    font-weight: 700; border: none; cursor: pointer; transition: 0.3s;
    box-shadow: 0 0 15px var(--brand-glow); display: flex; align-items: center; gap: 10px;
}
.btn-primary:hover { transform: translateY(-3px); box-shadow: 0 0 30px var(--brand-glow); }
.btn-stop { background: #ff4757; color: white; box-shadow: 0 0 15px rgba(255, 71, 87, 0.5); display: none;}

/* CAMERA CONTAINER */
.cam-wrapper {
    position: relative; width: 100%; max-width: 800px; margin: 0 auto;
    border-radius: 20px; overflow: hidden;
    border: 2px solid var(--glass-border);
    background: #000;
    box-shadow: 0 0 50px rgba(0,0,0,0.5);
}
.scan-line {
    position: absolute; top: 0; left: 0; width: 100%; height: 5px;
    background: var(--brand); box-shadow: 0 0 20px var(--brand);
    animation: scan 3s linear infinite; z-index: 5; display: none;
}
@keyframes scan {
    0% {top: 0;} 50% {top: 100%;} 100% {top: 0;}
}

video { width: 100%; height: auto; display: block; transform: scaleX(-1); } /* Mirror effect */
canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; transform: scaleX(-1); z-index: 2; }

/* OUTPUT BOX */
.output-box {
    margin-top: 30px; background: rgba(0, 247, 255, 0.05);
    border: 1px solid var(--brand); border-radius: 12px;
    padding: 20px; min-height: 80px; display: flex; flex-direction: column;
    align-items: center; justify-content: center;
}
.output-text { font-size: 1.5rem; font-weight: 700; color: white; letter-spacing: 2px; }
.confidence { color: var(--muted); font-size: 0.9rem; margin-top: 5px; }

/* LOADING */
.loader {
    display: none; font-size: 1.2rem; color: var(--brand); margin-top: 20px;
}
.loader i { animation: spin 1s linear infinite; }
@keyframes spin { 100% {transform: rotate(360deg);} }

/* RESPONSIVE */
@media(max-width: 600px){
    h1{font-size: 1.8rem;}
    .controls{flex-direction: column; width: 100%;}
    select, button{width: 100%; justify-content: center;}
}
</style>
</head>
<body>

<header>
  <a href="/" class="logo"><i class="fas fa-cube"></i> XIZOA Hub</a>
  <a href="/" class="back-btn"><i class="fas fa-arrow-left"></i> Back to Tools</a>
</header>

<div class="container">
  <h1>AI <span>Sign Language</span> Detector</h1>
  <p class="subtitle">Select your language, enable camera, and start signing. Our AI tracks hand gestures in real-time to bridge the communication gap.</p>

  <div class="controls">
    <select id="langSelect">
        <option value="US">ðŸ‡ºðŸ‡¸ ASL (American Sign Language)</option>
        <option value="IN">ðŸ‡®ðŸ‡³ ISL (Indian Sign Language)</option>
        <option value="UK">ðŸ‡¬ðŸ‡§ BSL (British Sign Language)</option>
        <option value="CN">ðŸ‡¨ðŸ‡³ CSL (Chinese Sign Language)</option>
        <option value="FR">ðŸ‡«ðŸ‡· LSF (French Sign Language)</option>
        <option value="DE">ðŸ‡©ðŸ‡ª DGS (German Sign Language)</option>
        <option value="JP">ðŸ‡¯ðŸ‡µ JSL (Japanese Sign Language)</option>
        <option value="BR">ðŸ‡§ðŸ‡· Libras (Brazilian Sign Language)</option>
        <option value="ES">ðŸ‡ªðŸ‡¸ LSE (Spanish Sign Language)</option>
        <option value="RU">ðŸ‡·ðŸ‡º RSL (Russian Sign Language)</option>
        <option value="AU">ðŸ‡¦ðŸ‡º Auslan (Australian Sign Language)</option>
        <option value="IT">ðŸ‡®ðŸ‡¹ LIS (Italian Sign Language)</option>
        <option value="KR">ðŸ‡°ðŸ‡· KSL (Korean Sign Language)</option>
        <option value="MX">ðŸ‡²ðŸ‡½ LSM (Mexican Sign Language)</option>
        <option value="AR">ðŸ‡¸ðŸ‡¦ ArSL (Arabic Sign Language)</option>
        <option value="TR">ðŸ‡¹ðŸ‡· TID (Turkish Sign Language)</option>
        <option value="PK">ðŸ‡µðŸ‡° PSL (Pakistan Sign Language)</option>
        <option value="ZA">ðŸ‡¿ðŸ‡¦ SASL (South African Sign Language)</option>
        <option value="UA">ðŸ‡ºðŸ‡¦ USL (Ukrainian Sign Language)</option>
        <option value="ID">ðŸ‡®ðŸ‡© Bisindo (Indonesian Sign Language)</option>
    </select>

    <button class="btn-primary" id="startBtn" onclick="startCamera()"><i class="fas fa-video"></i> Start Detector</button>
    <button class="btn-primary btn-stop" id="stopBtn" onclick="stopCamera()"><i class="fas fa-stop"></i> Stop</button>
  </div>

  <div class="loader" id="loader"><i class="fas fa-circle-notch"></i> Loading AI Model... Please wait.</div>

  <div class="cam-wrapper">
    <div class="scan-line" id="scanLine"></div>
    <video id="input_video"></video>
    <canvas id="output_canvas"></canvas>
  </div>

  <div class="output-box">
    <div class="output-text" id="outputText">Waiting for input...</div>
    <div class="confidence" id="confText">Make sure your hands are visible</div>
  </div>
  
  <div style="margin-top: 20px; color: #555; font-size: 0.8rem;">
    * Note: This tool uses Computer Vision to track hand landmarks. Full word translation requires a server-side dictionary.
  </div>
</div>

<script>
const videoElement = document.getElementById('input_video');
const canvasElement = document.getElementById('output_canvas');
const canvasCtx = canvasElement.getContext('2d');
const startBtn = document.getElementById('startBtn');
const stopBtn = document.getElementById('stopBtn');
const loader = document.getElementById('loader');
const scanLine = document.getElementById('scanLine');
const outputText = document.getElementById('outputText');
const confText = document.getElementById('confText');
let camera = null;
let isRunning = false;

// MediaPipe Hands Setup
const hands = new Hands({locateFile: (file) => {
  return `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`;
}});

hands.setOptions({
  maxNumHands: 2,
  modelComplexity: 1,
  minDetectionConfidence: 0.5,
  minTrackingConfidence: 0.5
});

hands.onResults(onResults);

function onResults(results) {
  if(!isRunning) return;

  loader.style.display = 'none';
  scanLine.style.display = 'block';

  // Resize canvas to match video
  canvasElement.width = videoElement.videoWidth;
  canvasElement.height = videoElement.videoHeight;

  canvasCtx.save();
  canvasCtx.clearRect(0, 0, canvasElement.width, canvasElement.height);
  
  // Draw Video Feed
  canvasCtx.drawImage(results.image, 0, 0, canvasElement.width, canvasElement.height);

  if (results.multiHandLandmarks && results.multiHandLandmarks.length > 0) {
    // Hand Detected
    outputText.innerText = "ðŸ– Hand Detected";
    outputText.style.color = "#00f7ff";
    confText.innerText = "Tracking Active | Analyzing Gestures...";

    for (const landmarks of results.multiHandLandmarks) {
      // Draw Connectors (Skeleton)
      drawConnectors(canvasCtx, landmarks, HAND_CONNECTIONS,
                     {color: '#00f7ff', lineWidth: 3}); // Neon Cyan Lines
      
      // Draw Landmarks (Dots)
      drawLandmarks(canvasCtx, landmarks, {color: '#ffffff', lineWidth: 1, radius: 4});
    }
  } else {
    // No Hand
    outputText.innerText = "Searching...";
    outputText.style.color = "#ffffff";
    confText.innerText = "Please show your hands to the camera";
  }
  canvasCtx.restore();
}

// Start Camera Function
function startCamera() {
  loader.style.display = 'block';
  startBtn.style.display = 'none';
  stopBtn.style.display = 'inline-flex';
  isRunning = true;

  camera = new Camera(videoElement, {
    onFrame: async () => {
      if(isRunning) await hands.send({image: videoElement});
    },
    width: 1280,
    height: 720
  });
  camera.start();
}

// Stop Camera Function
function stopCamera() {
  isRunning = false;
  if(camera) camera.stop();
  
  // Reset UI
  startBtn.style.display = 'inline-flex';
  stopBtn.style.display = 'none';
  loader.style.display = 'none';
  scanLine.style.display = 'none';
  canvasCtx.clearRect(0, 0, canvasElement.width, canvasElement.height);
  outputText.innerText = "Detector Stopped";
  outputText.style.color = "#fff";
  confText.innerText = "";
}

// Handle Language Change
document.getElementById('langSelect').addEventListener('change', function() {
    const langName = this.options[this.selectedIndex].text;
    confText.innerText = `Switched to ${langName} Mode`;
    // Future: Load specific model based on selection
});

</script>

</body>
</html>
